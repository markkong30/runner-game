(()=>{"use strict";var t,e=[],r=function(){var t=this;this.keys=[],window.addEventListener("keydown",(function(r){e.includes(r.key)||t.keys.push(r.key)})),window.addEventListener("keyup",(function(e){t.keys=t.keys.filter((function(t){return t!==e.key}))}))};!function(t){t[t.SITTING=0]="SITTING",t[t.RUNNING=1]="RUNNING",t[t.JUMPING=2]="JUMPING",t[t.FALLING=3]="FALLING"}(t||(t={}));var n,i=function(t){this.state=t},o=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(e){function r(t){var r=e.call(this,"FALLING")||this;return r.player=t,r}return o(r,e),r.prototype.enter=function(){this.player.frameY=2,this.player.maxFrame=6},r.prototype.handleInput=function(e){this.player.onGround()&&this.player.setState(t.RUNNING)},r}(i),h=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(e){function r(t){var r=e.call(this,"JUMPING")||this;return r.player=t,r}return h(r,e),r.prototype.enter=function(){this.player.frameY=1,this.player.maxFrame=6,this.player.onGround()&&(this.player.vy-=25)},r.prototype.handleInput=function(e){this.player.vy>this.player.gravity&&this.player.setState(t.FALLING)},r}(i),u=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(e){function r(t){var r=e.call(this,"RUNNING")||this;return r.player=t,r}return u(r,e),r.prototype.enter=function(){this.player.frameY=3,this.player.maxFrame=8},r.prototype.handleInput=function(e){e.includes("ArrowDown")?this.player.setState(t.SITTING):e.includes("ArrowUp")&&this.player.setState(t.JUMPING)},r}(i),c=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f=function(e){function r(t){var r=e.call(this,"SITTING")||this;return r.player=t,r}return c(r,e),r.prototype.enter=function(){this.player.frameY=5,this.player.maxFrame=4},r.prototype.handleInput=function(e){e.includes("ArrowLeft")||e.includes("ArrowRight")?this.player.setState(t.RUNNING):e.includes("ArrowUp")&&this.player.setState(t.JUMPING)},r}(i),y=function(){function t(t){this.game=t,this.width=100,this.height=92,this.x=0,this.y=this.game.height-this.height,this.image=document.querySelector("#player"),this.frameX=0,this.frameY=0,this.maxFrame=5,this.fps=20,this.frameInterval=1e3/this.fps,this.frameTimer=0,this.speed=0,this.maxSpeed=10,this.vy=0,this.gravity=1,this.states=[new f(this),new p(this),new a(this),new s(this)],this.currentState=this.states[0],this.currentState.enter()}return t.prototype.update=function(t,e){this.currentState.handleInput(t),this.x+=this.speed,t.includes("ArrowRight")?this.speed=this.maxSpeed:t.includes("ArrowLeft")?this.speed=-this.maxSpeed:this.speed=0,this.x<0&&(this.x=0),this.x>this.game.width-this.width&&(this.x=this.game.width-this.width),this.y+=this.vy,this.onGround()?this.vy=0:this.vy+=this.gravity,this.frameTimer>this.frameInterval?(this.frameTimer=0,this.frameX<this.maxFrame?this.frameX++:this.frameX=0):this.frameTimer+=e},t.prototype.draw=function(t){t.drawImage(this.image,this.frameX*this.width,this.frameY*this.height,this.width,this.height,this.x,this.y,this.width,this.height)},t.prototype.onGround=function(){return this.y>=this.game.height-this.height},t.prototype.setState=function(t){this.currentState=this.states[t],this.currentState.enter()},t}(),l=document.querySelector("#canvas-1"),d=null==l?void 0:l.getContext("2d");l.width=500,l.height=500;var w=new(function(){function t(t,e){this.width=t,this.height=e,this.player=new y(this),this.input=new r}return t.prototype.update=function(t){this.player.update(this.input.keys,t)},t.prototype.draw=function(t){this.player.draw(t)},t}())(l.width,l.height),m=0,v=function(t){var e=t-m;m=t,d.clearRect(0,0,l.width,l.height),w.update(e),w.draw(d),requestAnimationFrame(v)};v(0)})();